# Contributor:
# Maintainer:
pkgname=hassio-supervised-nm
pkgver=3.1.0
pkgrel=0
pkgdesc="Home Assistant Supervised (NetworkManager support)"
url="https://github.com/home-assistant/supervised-installer"
arch="noarch"
license="Apache-2.0"
depends="networkmanager"
makedepends=""
checkdepends=""
install="${pkgname}.pre-install ${pkgname}.post-install ${pkgname}.post-deinstall"
subpackages=""
source="
	${pkgname}-${pkgver}.tar.gz::https://github.com/home-assistant/supervised-installer/archive/refs/tags/${pkgver}.tar.gz
	${pkgname}.patch
	"
builddir="${srcdir}/supervised-installer-${pkgver}/homeassistant-supervised"
options="!check"

build() {
	mkdir -p "${pkgdir}"
}

package() {
	install -m644 -D "${builddir}/etc/network/interfaces" \
		"${pkgdir}/etc/network/interfaces"
	install -m644 -D "${builddir}/etc/NetworkManager/NetworkManager.conf" \
		"${pkgdir}/etc/NetworkManager/conf.d/hassio-supervised.conf"
}

sha512sums="
89a9fa630ff567f7d3bed3536ece5e91896dc0d88632bdb4d9c21df5fba227fbcd66ef98c2a369c1fca7f529e6dc5bdb6e4aebf5a7c4649dbf572e3087a6786c  hassio-supervised-nm-3.1.0.tar.gz
3335f753b919163b2f1b67e85969218cc2508a977f9c650a6f348dac3be4e2fe9af34c771f53c98152cf4254ab005b44b90452c0343147fe44165baf23fa5075  hassio-supervised-nm.patch
"
